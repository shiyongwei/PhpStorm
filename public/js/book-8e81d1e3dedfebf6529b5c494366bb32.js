ER.require("ER.Deals.Book",function(){var e={},t=function(){$(".js-bookTrigger").click(function(){var e=$(this);return $.ajax({url:e.attr("data-url")+".js",type:"get",dataType:"json",success:function(e){r(e)},error:function(e){var t=JSON.parse(e.responseText);ER.Notifications.showErrorMessage(t.error_message)}}),!1})},r=function(e){var t=$(e.content);return t.on("shown",function(){if(e.is_tours_reservation){t.find(".js-tourSelect").change(function(){var e=$(this).find("option:selected").val(),r=t.find(".js-motorcycleTourReservation form");r.attr("action",r.attr("data-url").replace(":id",e)),ER.MotorcycleTourReservation.onChange()});var r=e.reservation_widget;r.toursWidget=t.find(".js-tourReservation"),ER.MotorcycleTourReservation.init(r)}else new ER.CombinedWidget({widgetContainer:t.find(".js-reservationWidget"),reservationWidgetOptions:$.extend(e.reservation_widget,{onSuccess:function(){t.find(".js-loader").show()}})})}),t.on("hidden",function(){t.remove()}),ER.Layout.showOverlay(t),!1};return e.init=t,e}());